<!DOCTYPE html>
<html lang="en">
  {{ partial "head.html" . }}

  <body>
    {{partial "search.html" .}} {{partial "chat.html" .}}
    <div id="index" class="singlePage">
      {{partial "header.html" .}}
      <!-- TODO: Add my own banner <img id="banner" src="/banner.svg" /> -->
      <div class="bio">
        <div class="writing-sidebar">
          <div class="delay t-3">
            <h2>Recent Writing</h2>
            {{$writing := where .Site.RegularPages "Section" "posts" }}
            <ul class="delay stagger">
              {{range first 3 $writing }}
              <li>
                <div class="section">
                  <div class="desc">
                    <h3><a href="{{ .Permalink }}">{{- .Title -}}</a></h3>
                  </div>
                  <p class="meta">{{.WordCount}} words on {{partial "date-fmt.html" .}}</p>
                  {{partial "tags.html" .}}
                </div>
              </li>
              {{end}}
            </ul>
            <a href="/posts">See {{sub (len $writing) 3}} more →</a>
          </div>
          <div class="delay t-4">
            <h2>Newsletters</h2>
            {{$news := where .Site.RegularPages "Section" "news"}}
            <ul class="delay stagger">
              {{range first 2 $news }}
              <li>
                <div class="section">
                  <div class="desc">
                    <h3><a href="{{ .Permalink }}">{{- .Title -}}</a></h3>
                  </div>
                  <p class="meta">{{.WordCount}} words on {{ .Lastmod.Format "Jan 2, 2006" }}</p>
                  {{partial "tags.html" .}}
                </div>
              </li>
              {{end}}
            </ul>
            <a href="/news">See {{sub (len $news) 2}} more →</a>
          </div>
        </div>
        <article>
          <div class="delay stagger">{{partial "textprocessing.html" . }}</div>
        </article>
      </div>
      <div class="delay t-4">{{partial "footer.html" .}}</div>
    </div>
  </body>
</html>
